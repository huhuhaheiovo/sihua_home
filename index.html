<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <link rel="shortcut icon" href="https://c.s-microsoft.com/favicon.ico?v2"/>
    <link rel="stylesheet" href="converter.css">
    <link rel="stylesheet" href="about.css"/>
    <link rel="stylesheet" href="skins/default.css" id="default-stylesheet"/>
    <link rel="manifest" href="/manifest.json">
    <title>Temperature converter</title>
</head>
<body>
<div id="cardContainer"></div>

<script>
    // 计算当前时间到周五的剩余天数
    function getDaysUntilFriday() {
        const now = new Date();
        const today = now.getDay();  // 获取今天是星期几（0=周日，1=周一... 5=周五）
        let daysUntilFriday = 5 - today; // 计算距离周五的天数

        if (daysUntilFriday < 0) {
            daysUntilFriday += 7;  // 如果今天是周六或周日，算到下周五
        }
        return daysUntilFriday;
    }
    // 生成 Adaptive Card 数据
    function getAdaptiveCard() {
        const daysLeft = getDaysUntilFriday(); // 计算距离周五的天数
        return {
            "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
            "type": "AdaptiveCard",
            "version": "1.6",
            "body": [
                {
                    "type": "TextBlock",
                    "text": "距离周五还有：",
                    "weight": "Bolder",
                    "size": "Medium",
                    "horizontalAlignment": "Center"
                },
                {
                    "type": "TextBlock",
                    "text": daysLeft + " 天",
                    "size": "ExtraLarge",
                    "weight": "Bolder",
                    "color": "Attention",
                    "horizontalAlignment": "Center"
                }
            ]
        };
    }

    // 渲染 Adaptive Card
    function renderAdaptiveCard() {
        const adaptiveCard = new AdaptiveCards.AdaptiveCard();
        adaptiveCard.parse(getAdaptiveCard());

        const cardContainer = document.getElementById("cardContainer");
        cardContainer.innerHTML = ""; // 清空旧的卡片
        cardContainer.appendChild(adaptiveCard.render());
    }

    renderAdaptiveCard(); // 渲染卡片
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js', {scope: '/'});
    }
</script>
</body>
</html>